import{r as s,a as C,g as P}from"./index.B7hhhgbS.js";import{j as E,u as R}from"./index.D8BBHvmK.js";import{r as h}from"./index.LWU0jXT3.js";function $(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t?.(r),n===!1||!r.defaultPrevented)return e?.(r)}}function F(t,e){const n=s.createContext(e),o=c=>{const{children:i,...d}=c,a=s.useMemo(()=>d,Object.values(d));return E.jsx(n.Provider,{value:a,children:i})};o.displayName=t+"Provider";function r(c){const i=s.useContext(n);if(i)return i;if(e!==void 0)return e;throw new Error(`\`${c}\` must be used within \`${t}\``)}return[o,r]}function W(t,e=[]){let n=[];function o(c,i){const d=s.createContext(i),a=n.length;n=[...n,i];const u=f=>{const{scope:p,children:l,...N}=f,x=p?.[t]?.[a]||d,g=s.useMemo(()=>N,Object.values(N));return E.jsx(x.Provider,{value:g,children:l})};u.displayName=c+"Provider";function m(f,p){const l=p?.[t]?.[a]||d,N=s.useContext(l);if(N)return N;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${c}\``)}return[u,m]}const r=()=>{const c=n.map(i=>s.createContext(i));return function(d){const a=d?.[t]||c;return s.useMemo(()=>({[`__scope${t}`]:{...d,[t]:a}}),[d,a])}};return r.scopeName=t,[o,A(r,...e)]}function A(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const o=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(c){const i=o.reduce((d,{useScope:a,scopeName:u})=>{const f=a(c)[`__scope${u}`];return{...d,...f}},{});return s.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}var S=globalThis?.document?s.useLayoutEffect:()=>{},y=C.useId||(()=>{}),O=0;function k(t){const[e,n]=s.useState(y());return S(()=>{n(o=>o??String(O++))},[t]),e?`radix-${e}`:""}var w=h();const B=P(w);function M(t){const e=s.useRef(t);return s.useEffect(()=>{e.current=t}),s.useMemo(()=>(...n)=>e.current?.(...n),[])}function H({prop:t,defaultProp:e,onChange:n=()=>{}}){const[o,r]=T({defaultProp:e,onChange:n}),c=t!==void 0,i=c?t:o,d=M(n),a=s.useCallback(u=>{if(c){const f=typeof u=="function"?u(t):u;f!==t&&d(f)}else r(u)},[c,t,r,d]);return[i,a]}function T({defaultProp:t,onChange:e}){const n=s.useState(t),[o]=n,r=s.useRef(o),c=M(e);return s.useEffect(()=>{r.current!==o&&(c(o),r.current=o)},[o,r,c]),n}function I(t,e){return s.useReducer((n,o)=>e[n][o]??n,t)}var b=t=>{const{present:e,children:n}=t,o=U(e),r=typeof n=="function"?n({present:o.isPresent}):s.Children.only(n),c=R(o.ref,_(r));return typeof n=="function"||o.isPresent?s.cloneElement(r,{ref:c}):null};b.displayName="Presence";function U(t){const[e,n]=s.useState(),o=s.useRef({}),r=s.useRef(t),c=s.useRef("none"),i=t?"mounted":"unmounted",[d,a]=I(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const u=v(o.current);c.current=d==="mounted"?u:"none"},[d]),S(()=>{const u=o.current,m=r.current;if(m!==t){const p=c.current,l=v(u);t?a("MOUNT"):l==="none"||u?.display==="none"?a("UNMOUNT"):a(m&&p!==l?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,a]),S(()=>{if(e){let u;const m=e.ownerDocument.defaultView??window,f=l=>{const x=v(o.current).includes(l.animationName);if(l.target===e&&x&&(a("ANIMATION_END"),!r.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",u=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},p=l=>{l.target===e&&(c.current=v(o.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{m.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else a("ANIMATION_END")},[e,a]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:s.useCallback(u=>{u&&(o.current=getComputedStyle(u)),n(u)},[])}}function v(t){return t?.animationName||"none"}function _(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}export{b as P,B as R,$ as a,H as b,W as c,M as d,S as e,F as f,w as r,k as u};
