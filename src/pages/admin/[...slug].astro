---
import AdminApp from "@/components/admin/AdminApp";
import { supabase } from "@/lib/supabase";
import "@/styles/globals.css";

export async function getStaticPaths() {
  const paths = [
    { params: { slug: undefined } }, // /admin
    { params: { slug: "products" } },
    { params: { slug: "products/new" } },
    { params: { slug: "partners" } },
    { params: { slug: "rfqs" } },
    { params: { slug: "messages" } },
    { params: { slug: "settings" } },
  ];

  // Fetch existing product IDs to generate static paths for them
  const { data: products } = await supabase.from("products").select("id");
  if (products) {
    products.forEach((p) => {
      paths.push({ params: { slug: `products/${p.id}` } });
    });
  }

  return paths;
}

---

<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>ALDR Admin Console</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
</head>
<body>
    <AdminApp client:only="react" />
</body>
</html>
